import{a as l,t as f}from"../chunks/disclose-version.jgRLZvr1.js";import"../chunks/legacy.BpWRavtY.js";import{U as C,V as h,W as F,$ as N,g as a,X as m,Y as O,Z as P,_ as S,a0 as U,a1 as V}from"../chunks/runtime.CqtLc5Zb.js";import{e as c}from"../chunks/render.CazHVHcZ.js";import{p as W,i as b}from"../chunks/props.BPsEOSx_.js";import{e as X,i as Z}from"../chunks/each.DY7LSwvj.js";import{h as q,s as k}from"../chunks/attributes.BT2sV87b.js";import{i as A}from"../chunks/lifecycle.6BNzwres.js";import{o as B}from"../chunks/index-client.iZNzQUS1.js";import{T as D}from"../chunks/Tooltip.C7RVfpIV.js";var G=f('<img class="gallery-image svelte-1tnhk2f" loading="lazy">'),J=f("<!> <!>",1),K=f("<p>No images</p>"),Q=f('<div class="gallery svelte-1tnhk2f"><!></div>');function le(I,u){C(u,!1);let E=W(u,"data",8),r=h(E().images),i=[];const H=15;let d=!1,w=h([]),p=h(!1);function L(e){window.open(e,"_blank")}function _(){if(d)return;d=!0;const e=a(r).slice(i.length,i.length+H);i=[...i,...e],d=!1}function g(){window.innerHeight+window.pageYOffset>=document.body.offsetHeight-500&&_()}async function x(){try{const e=await fetch("https://storage.googleapis.com/social-museum/captured/");if(!response.ok)throw new Error("Failed to fetch images");const o=await e.json();m(r,o.images)}catch(e){console.error(e)}}B(async()=>(x(),_(),window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g))),A();var v=Q();c("scroll",N,g);var z=O(v);{var M=e=>{var o=J(),y=P(o);X(y,1,()=>a(r),Z,(s,n)=>{var t=G();S(()=>{k(t,"src",a(n).src),k(t,"alt",`${a(n).type??""} image`)}),q(t),c("click",t,()=>L(a(n).link)),c("mouseover",t,()=>{m(w,a(n).date),m(p,!0)}),c("mouseleave",t,()=>m(p,!1)),l(s,t)});var Y=U(y,2);{var j=s=>{D(s,{get data(){return a(w)}})};b(Y,s=>{a(p)&&s(j)})}l(e,o)},T=e=>{var o=K();l(e,o)};b(z,e=>{a(r).length>0?e(M):e(T,!1)})}V(v),l(I,v),F()}export{le as component};
