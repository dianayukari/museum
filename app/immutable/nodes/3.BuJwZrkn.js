import{a as P,t as L}from"../chunks/disclose-version.D4dnic9f.js";import"../chunks/legacy.QktqtgJ9.js";import{V as ae,Y as re,Z as m,$ as k,W as se,X as q,_ as g,g as e,ak as V,aD as ie,aE as u,a4 as c,aF as F,aG as ge,aH as de,e as ue}from"../chunks/runtime.B2mDwODK.js";import{e as E,s as X}from"../chunks/render.DVa5gisn.js";import{p as I,i as te}from"../chunks/props.DUhDxAcK.js";import{i as le}from"../chunks/lifecycle.uTWdwytE.js";import{o as ve}from"../chunks/index-client.LRPMspGv.js";import{e as Z,i as J,s as ne,h as fe}from"../chunks/attributes.CdXuB1CN.js";function K(v,r,p){if(p){if(v.classList.contains(r))return;v.classList.add(r)}else{if(!v.classList.contains(r))return;v.classList.remove(r)}}function ye({data:v}){return{...v,taggedImages:v.taggedImages||[],postedImages:v.postedImages||[]}}const Ee=Object.freeze(Object.defineProperty({__proto__:null,load:ye},Symbol.toStringTag,{value:"Module"}));var me=L('<button class="svelte-vdfgng"> </button>'),be=L('<button class="svelte-vdfgng"> </button>'),_e=L('<div class="break svelte-vdfgng"></div> <div class="category"><button class="svelte-vdfgng"> </button></div> <div class="subcategoriesContainer svelte-vdfgng"><span class="arrow svelte-vdfgng">&#8594;</span> <div class="subcategories"></div> <div class="subcategories2"></div></div>',1),pe=L('<div><div class="filter-container svelte-vdfgng"></div></div>');function he(v,r){ae(r,!1);let p=I(r,"categories",24,()=>[]),o=I(r,"selectedCategory",12,null),l=I(r,"selectedSubcategory",12,null),f=I(r,"selectedSubcategory2",12,null),y=I(r,"imageCounts",24,()=>({})),h=I(r,"currentPage",8,"");const b=["tate","centrepompidou","institutotomieohtake","mca","themuseumofmodernart","mca_australia"];function _(t){return b.includes(t)}function A(t){o()===t?(o(null),l(null),f(null)):(o(t),l(null),f(null))}function C(t){l()===t?l(null):(l(t),f(null))}function w(t){f()===t?f(null):(f(t),l(null))}function T(t){return o()===t&&y()[t]>0}function H(t){return _(h())||y()[t]===0}function z(t,s){return o()==t&&l()===s&&y()[`${t}-${s}`]>0}function G(t,s){return _(h())||o()!==t||y()[`${t}-${s}`]===0}function n(t,s){return o()===t&&f()===s&&y()[`${t}-${s}`]>0}function D(t,s){return _(h())||o()!==t||y()[`${t}-${s}`]===0}le();var M=pe(),Y=m(M);Z(Y,5,p,J,(t,s)=>{let d=()=>e(s).category,x=()=>e(s).subcategory,B=()=>e(s).subcategory2;var N=_e(),W=k(se(N),2),j=m(W);q(()=>j.disabled=H(d()));const Q=V(()=>T(d()));var R=m(j,!0);g(j),g(W);var a=k(W,2),i=k(m(a),2);Z(i,5,x,J,(U,O)=>{var S=me();q(()=>S.disabled=G(d(),e(O)));const $=V(()=>z(d(),e(O)));var ee=m(S,!0);g(S),q(()=>{K(S,"active",e($)),X(ee,e(O))}),E("click",S,()=>C(e(O))),P(U,S)}),g(i);var oe=k(i,2);Z(oe,5,B,J,(U,O)=>{var S=be();q(()=>S.disabled=D(d(),e(O)));const $=V(()=>n(d(),e(O)));var ee=m(S,!0);g(S),q(()=>{K(S,"active",e($)),X(ee,e(O))}),E("click",S,()=>w(e(O))),P(U,S)}),g(oe),g(a),q(()=>{K(j,"active",e(Q)),X(R,d())}),E("click",j,()=>A(d())),P(t,N)}),g(Y),g(M),P(v,M),re()}var Se=L('<div><div class="tooltip svelte-m5auav"><div class="tooltip-content"><p> </p></div></div></div>');function Ie(v,r){let p=I(r,"data",8),o=u(),l=u();function f(C){c(o,C.pageX+5),c(l,C.pageY+5)}var y=Se();E("mousemove",ie.body,f);var h=m(y),b=m(h),_=m(b),A=m(_);g(_),g(b),g(h),g(y),q(()=>{ne(h,"style",`left: ${e(o)??""}px; top: ${e(l)??""}px;`),X(A,`Posted at: ${p()??""}`)}),P(v,y)}var Ce=L('<img class="gallery-image svelte-1x92qrm" alt="tagged image" loading="lazy">'),we=L("<!> <!>",1),xe=L("<p>No tagged images</p>"),ke=L('<div class="gallery svelte-1x92qrm"><p class="gallery-title svelte-1x92qrm"> </p> <!></div>');function ce(v,r){ae(r,!1);let p=I(r,"images",24,()=>[]),o=I(r,"title",8,""),l=I(r,"selectedCategory",24,()=>[]),f=I(r,"selectedSubcategory",24,()=>[]),y=I(r,"selectedSubcategory2",24,()=>[]),h=u([]),b=u(!1);function _(n){window.open(n,"_blank")}function A(n){return l()?f()?n.category===l()&&n.subcategory===f():y()?n.category===l()&&n.subcategory2===y():n.category===l():!1}le();var C=ke(),w=m(C),T=m(w,!0);g(w);var H=k(w,2);{var z=n=>{var D=we(),M=se(D);Z(M,1,p,J,(s,d)=>{var x=Ce();const B=V(()=>A(e(d)));q(()=>{ne(x,"src",e(d).src),K(x,"highlighted",e(B))}),fe(x),E("click",x,()=>_(e(d).link)),E("mouseover",x,()=>{c(h,e(d).date),c(b,!0)}),E("mouseleave",x,()=>c(b,!1)),P(s,x)});var Y=k(M,2);{var t=s=>{Ie(s,{get data(){return e(h)}})};te(Y,s=>{e(b)&&s(t)})}P(n,D)},G=n=>{var D=xe();P(n,D)};te(H,n=>{p().length>0?n(z):n(G,!1)})}g(C),q(()=>X(T,o())),P(v,C),re()}var Pe=L('<p class="svelte-b83cm4">Loading more images</p>'),Le=L('<div class="top-container svelte-b83cm4"><p class="museum-name svelte-b83cm4"><span class="back-arrow svelte-b83cm4"><a href="/">&#10229;</a></span> </p> <p class="title-page svelte-b83cm4">What did they post?</p> <!></div> <div class="gallery-container svelte-b83cm4"><!> <!></div> <!>',1);function Ye(v,r){ae(r,!1);const p=u(),o=u(),l=u(),f=u(),y=u();let h=I(r,"data",8),b=u([]),_=u([]),A=u([]),C=u([]),w=u(null),T=u(null),H=u(null),z=u(!1);const G=30;let n=[{category:"Are there people?",subcategory:["with artwork?"],subcategory2:["person alone?","multiple people?"]},{category:"No people at all?",subcategory:["Indoor gallery?","Outdoor setting?"],subcategory2:[]}];function D(){if(e(z))return;c(z,!0);const a=e(o).slice(e(b).length,e(b).length+G),i=e(l).slice(e(_).length,e(_).length+G);c(b,[...e(b),...a]),c(_,[...e(_),...i]),c(z,!1)}function M(){window.innerHeight+window.pageYOffset>=document.body.offsetHeight-500&&D()}ve(async()=>(D(),window.addEventListener("scroll",M),()=>window.removeEventListener("scroll",M)));function Y(a){return(!e(w)||a.category===e(w))&&(!e(T)||a.subcategory===e(T))&&(!e(H)||a.subcategory2===e(H))}F(()=>(e(p),e(o),e(l),ue(h())),()=>{(a=>(c(p,a.museum),c(o,a.taggedImages),c(l,a.postedImages)))(h())}),F(()=>e(o),()=>{c(C,e(o).filter(Y))}),F(()=>e(l),()=>{c(A,e(l).filter(Y))}),F(()=>(e(C),e(A)),()=>{c(f,[...e(C),...e(A)])}),F(()=>e(f),()=>{c(y,e(f).reduce((a,i)=>(a[i.category]=(a[i.category]||0)+1,a[`${i.category}-${i.subcategory}`]=(a[`${i.category}-${i.subcategory}`]||0)+1,a[`${i.category}-${i.subcategory2}`]=(a[`${i.category}-${i.subcategory2}`]||0)+1,a),{}))}),ge(),le();var t=Le();E("scroll",de,M);var s=se(t),d=m(s),x=k(m(d));g(d);var B=k(d,4);he(B,{categories:n,get imageCounts(){return e(y)},get currentPage(){return e(p)},get selectedCategory(){return e(w)},set selectedCategory(a){c(w,a)},get selectedSubcategory(){return e(T)},set selectedSubcategory(a){c(T,a)},get selectedSubcategory2(){return e(H)},set selectedSubcategory2(a){c(H,a)},$$legacy:!0}),g(s);var N=k(s,2),W=m(N);ce(W,{get images(){return e(_)},title:"Posted by the museum",get selectedCategory(){return e(w)},get selectedSubcategory(){return e(T)},get selectedSubcategory2(){return e(H)}});var j=k(W,2);ce(j,{get images(){return e(b)},title:"Tagged the museum",get selectedCategory(){return e(w)},get selectedSubcategory(){return e(T)},get selectedSubcategory2(){return e(H)}}),g(N);var Q=k(N,2);{var R=a=>{var i=Pe();P(a,i)};te(Q,a=>{e(z)&&a(R)})}q(()=>X(x,`@${e(p)??""}`)),P(v,t),re()}export{Ye as component,Ee as universal};
