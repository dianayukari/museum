import{a as L,t as T}from"../chunks/disclose-version.BV7kTGLI.js";import"../chunks/legacy.TKaeSdnX.js";import{U as se,V as le,W as p,_ as x,X as oe,Y as D,a0 as v,g as e,an as X,Z as i,a1 as d,aG as V,aH as ie,$ as ge,e as ue}from"../chunks/runtime.CilvVxo7.js";import{e as N,s as Z}from"../chunks/render.DFg_s9Xb.js";import{p as h,i as ae}from"../chunks/props.7rJstdld.js";import{h as de,s as re}from"../chunks/attributes.Ch_aKFpZ.js";import{i as ce}from"../chunks/lifecycle.BuOt2W19.js";import{o as ve}from"../chunks/index-client.BNJ2FWfv.js";import{e as Q,i as R}from"../chunks/each.BPNh2xO3.js";import{T as fe}from"../chunks/Tooltip.CSMRKAO3.js";import{b as ye}from"../chunks/paths.DCLaEKPJ.js";function F(f,s,S){if(S){if(f.classList.contains(s))return;f.classList.add(s)}else{if(!f.classList.contains(s))return;f.classList.remove(s)}}function be({data:f}){return{...f,taggedImages:f.taggedImages||[],postedImages:f.postedImages||[]}}const Ne=Object.freeze(Object.defineProperty({__proto__:null,load:be},Symbol.toStringTag,{value:"Module"}));var me=T('<button class="svelte-vdfgng"> </button>'),_e=T('<button class="svelte-vdfgng"> </button>'),pe=T('<div class="break svelte-vdfgng"></div> <div class="category"><button class="svelte-vdfgng"> </button></div> <div class="subcategoriesContainer svelte-vdfgng"><div class="subcategories"></div> <div class="subcategories2"></div></div>',1),he=T('<div><div class="filter-container svelte-vdfgng"></div></div>');function Se(f,s){se(s,!1);let S=h(s,"categories",24,()=>[]),g=h(s,"selectedCategory",12,null),l=h(s,"selectedSubcategory",12,null),y=h(s,"selectedSubcategory2",12,null),m=h(s,"imageCounts",24,()=>({})),H=h(s,"currentPage",8,"");const I=["tate","centrepompidou","institutotomieohtake","mca","themuseumofmodernart","mca_australia"];function C(t){return I.includes(t)}function O(t){g()===t?(g(null),l(null),y(null)):(g(t),l(null),y(null))}function j(t){l()===t?l(null):(l(t),y(null))}function _(t){y()===t?y(null):(y(t),l(null))}function w(t){return g()===t&&m()[t]>0}function k(t){return C(H())||m()[t]===0}function E(t,r){return g()==t&&l()===r&&m()[`${t}-${r}`]>0}function W(t,r){return C(H())||g()!==t||m()[`${t}-${r}`]===0}function c(t,r){return g()===t&&y()===r&&m()[`${t}-${r}`]>0}function A(t,r){return C(H())||g()!==t||m()[`${t}-${r}`]===0}ce();var P=he(),G=p(P);Q(G,5,S,R,(t,r)=>{let o=()=>e(r).category,u=()=>e(r).subcategory,q=()=>e(r).subcategory2;var Y=pe(),B=x(oe(Y),2),M=p(B);D(()=>M.disabled=k(o()));const J=X(()=>w(o()));var $=p(M,!0);v(M),v(B);var K=x(B,2),U=p(K);Q(U,5,u,R,(n,z)=>{var b=me();D(()=>b.disabled=W(o(),e(z)));const ee=X(()=>E(o(),e(z)));var te=p(b,!0);v(b),D(()=>{F(b,"active",e(ee)),Z(te,e(z))}),N("click",b,()=>j(e(z))),L(n,b)}),v(U);var a=x(U,2);Q(a,5,q,R,(n,z)=>{var b=_e();D(()=>b.disabled=A(o(),e(z)));const ee=X(()=>c(o(),e(z)));var te=p(b,!0);v(b),D(()=>{F(b,"active",e(ee)),Z(te,e(z))}),N("click",b,()=>_(e(z))),L(n,b)}),v(a),v(K),D(()=>{F(M,"active",e(J)),Z($,o())}),N("click",M,()=>O(o())),L(t,Y)}),v(G),v(P),L(f,P),le()}var Ie=T('<img class="gallery-image svelte-le8jot" loading="lazy">'),Ce=T("<!> <!>",1),we=T("<p>No images</p>"),ke=T('<div class="gallery svelte-le8jot"><p class="gallery-title svelte-le8jot"> </p> <!></div>');function ne(f,s){se(s,!1);let S=h(s,"images",24,()=>[]),g=h(s,"title",8,""),l=h(s,"selectedCategory",24,()=>[]),y=h(s,"selectedSubcategory",24,()=>[]),m=h(s,"selectedSubcategory2",24,()=>[]),H=d([]),I=d(!1);function C(c){window.open(c,"_blank")}function O(c){return l()?y()?c.category===l()&&c.subcategory===y():m()?c.category===l()&&c.subcategory2===m():c.category===l():!1}ce();var j=ke(),_=p(j),w=p(_,!0);v(_);var k=x(_,2);{var E=c=>{var A=Ce(),P=oe(A);Q(P,1,S,R,(r,o)=>{var u=Ie();const q=X(()=>O(e(o))),Y=X(()=>!O(e(o))&&l());D(()=>{re(u,"src",e(o).src),re(u,"alt",`${e(o).type??""} image`),F(u,"highlighted",e(q)),F(u,"notHighlighted",e(Y))}),de(u),N("click",u,()=>C(e(o).link)),N("mouseover",u,()=>{i(H,e(o).date),i(I,!0)}),N("mouseleave",u,()=>i(I,!1)),L(r,u)});var G=x(P,2);{var t=r=>{fe(r,{get data(){return e(H)}})};ae(G,r=>{e(I)&&r(t)})}L(c,A)},W=c=>{var A=we();L(c,A)};ae(k,c=>{S().length>0?c(E):c(W,!1)})}v(j),D(()=>Z(w,g())),L(f,j),le()}var Pe=T('<p class="svelte-b83cm4">Loading more images</p>'),xe=T('<div class="top-container svelte-b83cm4"><p class="museum-name svelte-b83cm4"><span class="back-arrow svelte-b83cm4"><a>&#10229;</a></span> </p> <p class="title-page svelte-b83cm4">What did they post?</p> <!></div> <div class="gallery-container svelte-b83cm4"><!> <!></div> <!>',1);function We(f,s){se(s,!1);const S=d(),g=d(),l=d(),y=d(),m=d();let H=h(s,"data",8),I=d([]),C=d([]),O=d([]),j=d([]),_=d(null),w=d(null),k=d(null),E=d(!1);const W=30;let c=[{category:"Are there people?",subcategory:["with artwork?"],subcategory2:["person alone?","multiple people?"]},{category:"No people at all?",subcategory2:[]}];function A(){if(e(E))return;i(E,!0);const a=e(g).slice(e(I).length,e(I).length+W),n=e(l).slice(e(C).length,e(C).length+W);i(I,[...e(I),...a]),i(C,[...e(C),...n]),i(E,!1)}function P(){window.innerHeight+window.pageYOffset>=document.body.offsetHeight-500&&A()}ve(async()=>(A(),window.addEventListener("scroll",P),()=>window.removeEventListener("scroll",P)));function G(a){return(!e(_)||a.category===e(_))&&(!e(w)||a.subcategory===e(w))&&(!e(k)||a.subcategory2===e(k))}V(()=>(e(S),e(g),e(l),ue(H())),()=>{(a=>(i(S,a.museum),i(g,a.taggedImages),i(l,a.postedImages)))(H())}),V(()=>e(g),()=>{i(j,e(g).filter(G))}),V(()=>e(l),()=>{i(O,e(l).filter(G))}),V(()=>(e(j),e(O)),()=>{i(y,[...e(j),...e(O)])}),V(()=>e(y),()=>{i(m,e(y).reduce((a,n)=>(a[n.category]=(a[n.category]||0)+1,a[`${n.category}-${n.subcategory}`]=(a[`${n.category}-${n.subcategory}`]||0)+1,a[`${n.category}-${n.subcategory2}`]=(a[`${n.category}-${n.subcategory2}`]||0)+1,a),{}))}),ie(),ce();var t=xe();N("scroll",ge,P);var r=oe(t),o=p(r),u=p(o),q=p(u);re(q,"href",`${ye??""}/`),v(u);var Y=x(u);v(o);var B=x(o,4);Se(B,{categories:c,get imageCounts(){return e(m)},get currentPage(){return e(S)},get selectedCategory(){return e(_)},set selectedCategory(a){i(_,a)},get selectedSubcategory(){return e(w)},set selectedSubcategory(a){i(w,a)},get selectedSubcategory2(){return e(k)},set selectedSubcategory2(a){i(k,a)},$$legacy:!0}),v(r);var M=x(r,2),J=p(M);ne(J,{get images(){return e(C)},title:"Posted by the museum",get selectedCategory(){return e(_)},get selectedSubcategory(){return e(w)},get selectedSubcategory2(){return e(k)}});var $=x(J,2);ne($,{get images(){return e(I)},title:"Tagged the museum",get selectedCategory(){return e(_)},get selectedSubcategory(){return e(w)},get selectedSubcategory2(){return e(k)}}),v(M);var K=x(M,2);{var U=a=>{var n=Pe();L(a,n)};ae(K,a=>{e(E)&&a(U)})}D(()=>Z(Y,`@${e(S)??""}`)),L(f,t),le()}export{We as component,Ne as universal};
