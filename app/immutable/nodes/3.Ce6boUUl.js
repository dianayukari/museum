import{a as P,t as L}from"../chunks/disclose-version.B6l5ZyFo.js";import"../chunks/legacy.DRA0ICbF.js";import{V as re,Y as se,Z as m,$ as k,W as le,X as q,_ as c,g as e,ak as K,aD as ie,aE as u,a4 as n,aF as F,aG as ge,aH as de,e as ue}from"../chunks/runtime.Dl1wjfhC.js";import{e as Y,s as N}from"../chunks/render.DuD_MSXo.js";import{p as C,i as ae}from"../chunks/props.ClKnKXRJ.js";import{s as oe,h as ve}from"../chunks/attributes.BMi6SvAX.js";import{i as ne}from"../chunks/lifecycle.DP5prBQB.js";import{o as fe}from"../chunks/index-client.BKZ7vUi8.js";import{e as Q,i as R}from"../chunks/each.D9vaxP9s.js";import{b as ye}from"../chunks/paths.A2ZULtbR.js";function U(v,r,_){if(_){if(v.classList.contains(r))return;v.classList.add(r)}else{if(!v.classList.contains(r))return;v.classList.remove(r)}}function me({data:v}){return{...v,taggedImages:v.taggedImages||[],postedImages:v.postedImages||[]}}const Ge=Object.freeze(Object.defineProperty({__proto__:null,load:me},Symbol.toStringTag,{value:"Module"}));var be=L('<button class="svelte-vdfgng"> </button>'),pe=L('<button class="svelte-vdfgng"> </button>'),_e=L('<div class="break svelte-vdfgng"></div> <div class="category"><button class="svelte-vdfgng"> </button></div> <div class="subcategoriesContainer svelte-vdfgng"><span class="arrow svelte-vdfgng">&#8594;</span> <div class="subcategories"></div> <div class="subcategories2"></div></div>',1),he=L('<div><div class="filter-container svelte-vdfgng"></div></div>');function Se(v,r){re(r,!1);let _=C(r,"categories",24,()=>[]),o=C(r,"selectedCategory",12,null),l=C(r,"selectedSubcategory",12,null),f=C(r,"selectedSubcategory2",12,null),y=C(r,"imageCounts",24,()=>({})),h=C(r,"currentPage",8,"");const b=["tate","centrepompidou","institutotomieohtake","mca","themuseumofmodernart","mca_australia"];function p(t){return b.includes(t)}function A(t){o()===t?(o(null),l(null),f(null)):(o(t),l(null),f(null))}function w(t){l()===t?l(null):(l(t),f(null))}function x(t){f()===t?f(null):(f(t),l(null))}function T(t){return o()===t&&y()[t]>0}function H(t){return p(h())||y()[t]===0}function E(t,s){return o()==t&&l()===s&&y()[`${t}-${s}`]>0}function G(t,s){return p(h())||o()!==t||y()[`${t}-${s}`]===0}function i(t,s){return o()===t&&f()===s&&y()[`${t}-${s}`]>0}function D(t,s){return p(h())||o()!==t||y()[`${t}-${s}`]===0}ne();var M=he(),j=m(M);Q(j,5,_,R,(t,s)=>{let d=()=>e(s).category,S=()=>e(s).subcategory,W=()=>e(s).subcategory2;var V=_e(),X=k(le(V),2),O=m(X);q(()=>O.disabled=H(d()));const Z=K(()=>T(d()));var $=m(O,!0);c(O),c(X);var J=k(X,2),B=k(m(J),2);Q(B,5,S,R,(g,z)=>{var I=be();q(()=>I.disabled=G(d(),e(z)));const ee=K(()=>E(d(),e(z)));var te=m(I,!0);c(I),q(()=>{U(I,"active",e(ee)),N(te,e(z))}),Y("click",I,()=>w(e(z))),P(g,I)}),c(B);var a=k(B,2);Q(a,5,W,R,(g,z)=>{var I=pe();q(()=>I.disabled=D(d(),e(z)));const ee=K(()=>i(d(),e(z)));var te=m(I,!0);c(I),q(()=>{U(I,"active",e(ee)),N(te,e(z))}),Y("click",I,()=>x(e(z))),P(g,I)}),c(a),c(J),q(()=>{U(O,"active",e(Z)),N($,d())}),Y("click",O,()=>A(d())),P(t,V)}),c(j),c(M),P(v,M),se()}var Ie=L('<div><div class="tooltip svelte-m5auav"><div class="tooltip-content"><p> </p></div></div></div>');function Ce(v,r){let _=C(r,"data",8),o=u(),l=u();function f(w){n(o,w.pageX+5),n(l,w.pageY+5)}var y=Ie();Y("mousemove",ie.body,f);var h=m(y),b=m(h),p=m(b),A=m(p);c(p),c(b),c(h),c(y),q(()=>{oe(h,"style",`left: ${e(o)??""}px; top: ${e(l)??""}px;`),N(A,`Posted at: ${_()??""}`)}),P(v,y)}var we=L('<img class="gallery-image svelte-1x92qrm" alt="tagged image" loading="lazy">'),xe=L("<!> <!>",1),ke=L("<p>No tagged images</p>"),Pe=L('<div class="gallery svelte-1x92qrm"><p class="gallery-title svelte-1x92qrm"> </p> <!></div>');function ce(v,r){re(r,!1);let _=C(r,"images",24,()=>[]),o=C(r,"title",8,""),l=C(r,"selectedCategory",24,()=>[]),f=C(r,"selectedSubcategory",24,()=>[]),y=C(r,"selectedSubcategory2",24,()=>[]),h=u([]),b=u(!1);function p(i){window.open(i,"_blank")}function A(i){return l()?f()?i.category===l()&&i.subcategory===f():y()?i.category===l()&&i.subcategory2===y():i.category===l():!1}ne();var w=Pe(),x=m(w),T=m(x,!0);c(x);var H=k(x,2);{var E=i=>{var D=xe(),M=le(D);Q(M,1,_,R,(s,d)=>{var S=we();const W=K(()=>A(e(d)));q(()=>{oe(S,"src",e(d).src),U(S,"highlighted",e(W))}),ve(S),Y("click",S,()=>p(e(d).link)),Y("mouseover",S,()=>{n(h,e(d).date),n(b,!0)}),Y("mouseleave",S,()=>n(b,!1)),P(s,S)});var j=k(M,2);{var t=s=>{Ce(s,{get data(){return e(h)}})};ae(j,s=>{e(b)&&s(t)})}P(i,D)},G=i=>{var D=ke();P(i,D)};ae(H,i=>{_().length>0?i(E):i(G,!1)})}c(w),q(()=>N(T,o())),P(v,w),se()}var Le=L('<p class="svelte-b83cm4">Loading more images</p>'),Te=L('<div class="top-container svelte-b83cm4"><p class="museum-name svelte-b83cm4"><span class="back-arrow svelte-b83cm4"><a>&#10229;</a></span> </p> <p class="title-page svelte-b83cm4">What did they post?</p> <!></div> <div class="gallery-container svelte-b83cm4"><!> <!></div> <!>',1);function Ne(v,r){re(r,!1);const _=u(),o=u(),l=u(),f=u(),y=u();let h=C(r,"data",8),b=u([]),p=u([]),A=u([]),w=u([]),x=u(null),T=u(null),H=u(null),E=u(!1);const G=30;let i=[{category:"Are there people?",subcategory:["with artwork?"],subcategory2:["person alone?","multiple people?"]},{category:"No people at all?",subcategory:["Indoor gallery?","Outdoor setting?"],subcategory2:[]}];function D(){if(e(E))return;n(E,!0);const a=e(o).slice(e(b).length,e(b).length+G),g=e(l).slice(e(p).length,e(p).length+G);n(b,[...e(b),...a]),n(p,[...e(p),...g]),n(E,!1)}function M(){window.innerHeight+window.pageYOffset>=document.body.offsetHeight-500&&D()}fe(async()=>(D(),window.addEventListener("scroll",M),()=>window.removeEventListener("scroll",M)));function j(a){return(!e(x)||a.category===e(x))&&(!e(T)||a.subcategory===e(T))&&(!e(H)||a.subcategory2===e(H))}F(()=>(e(_),e(o),e(l),ue(h())),()=>{(a=>(n(_,a.museum),n(o,a.taggedImages),n(l,a.postedImages)))(h())}),F(()=>e(o),()=>{n(w,e(o).filter(j))}),F(()=>e(l),()=>{n(A,e(l).filter(j))}),F(()=>(e(w),e(A)),()=>{n(f,[...e(w),...e(A)])}),F(()=>e(f),()=>{n(y,e(f).reduce((a,g)=>(a[g.category]=(a[g.category]||0)+1,a[`${g.category}-${g.subcategory}`]=(a[`${g.category}-${g.subcategory}`]||0)+1,a[`${g.category}-${g.subcategory2}`]=(a[`${g.category}-${g.subcategory2}`]||0)+1,a),{}))}),ge(),ne();var t=Te();Y("scroll",de,M);var s=le(t),d=m(s),S=m(d),W=m(S);oe(W,"href",`${ye??""}/`),c(S);var V=k(S);c(d);var X=k(d,4);Se(X,{categories:i,get imageCounts(){return e(y)},get currentPage(){return e(_)},get selectedCategory(){return e(x)},set selectedCategory(a){n(x,a)},get selectedSubcategory(){return e(T)},set selectedSubcategory(a){n(T,a)},get selectedSubcategory2(){return e(H)},set selectedSubcategory2(a){n(H,a)},$$legacy:!0}),c(s);var O=k(s,2),Z=m(O);ce(Z,{get images(){return e(p)},title:"Posted by the museum",get selectedCategory(){return e(x)},get selectedSubcategory(){return e(T)},get selectedSubcategory2(){return e(H)}});var $=k(Z,2);ce($,{get images(){return e(b)},title:"Tagged the museum",get selectedCategory(){return e(x)},get selectedSubcategory(){return e(T)},get selectedSubcategory2(){return e(H)}}),c(O);var J=k(O,2);{var B=a=>{var g=Le();P(a,g)};ae(J,a=>{e(E)&&a(B)})}q(()=>N(V,`@${e(_)??""}`)),P(v,t),se()}export{Ne as component,Ge as universal};
